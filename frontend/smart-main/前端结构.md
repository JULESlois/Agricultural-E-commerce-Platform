好的，既然您选择了 React 技术栈，我们将基于 React 18 + TypeScript + Vite 这一黄金组合来重构代码组织架构。

考虑到“智农链”的企业级/政府级定位，在 React 生态中，最适合的 UI 库是 Ant Design 5.0（成熟、稳重、适合中后台），而对于设计规范中要求的高质量动画，我们将引入 Framer Motion（React 界动画事实标准）。

以下是精确到组件和动画的 React 前端工程架构 V1.0。

一、 技术选型清单 (Tech Stack)

核心框架: React 18 (Hooks, Concurrent Mode)

构建工具: Vite 5.x

语言: TypeScript 5.x

路由: React Router v6 (Data APIs)

状态管理: Zustand (比 Redux 更轻量、更符合 Hooks 直觉，适合模块化开发)

UI 组件库: Ant Design v5 (通过 ConfigProvider 定制主题色 #4CAF50)

样式方案: Tailwind CSS (原子类布局) + CSS Modules (组件私有样式)

动画库: Framer Motion (实现所有微交互和转场)

数据请求: TanStack Query (React Query) (处理服务端状态、缓存、Loading) + Axios

表单管理: React Hook Form + Zod (Schema 校验)

图表: ECharts-for-React

二、 根目录结构 (Root)
code
Text
download
content_copy
expand_less
smart-agro-chain-react/
├── .husky/                 # Git Hooks
├── .vscode/                # Settings
├── public/                 # 静态资源
├── src/                    # 源码目录 (下详)
├── .env                    # 环境变量
├── index.html              # 入口 HTML
├── package.json            # 依赖
├── tailwind.config.js      # Tailwind 配置 (定义主色 colors: { primary: '#4CAF50' })
├── tsconfig.json           # TS 配置
├── vite.config.ts          # Vite 配置 (Alias @ -> src)
└── theme.config.ts         # Ant Design 主题配置文件 (定制 Seed Token)
三、 核心源码目录 (src) - 极致精细化
code
Text
download
content_copy
expand_less
src/
├── assets/                 # 静态资源
│   ├── icons/              # SVG组件化 (使用 SVGR 将 svg 转为 React 组件)
│   │   ├── IconFarmer.tsx
│   │   └── IconLoan.tsx
│   └── styles/
│       ├── global.css      # 全局重置
│       └── animation.css   # 简单的 CSS Keyframes
│
├── api/                    # API 定义 (React Query Hooks 封装)
│   ├── auth.ts
│   ├── product.ts
│   └── ...
│
├── components/             # 全局公共组件 (Atomic Design)
│   ├── common/             # 1. 基础原子组件 (对应设计规范)
│   │   ├── AgroButton/     # [按钮组件]
│   │   │   ├── index.tsx   # 封装 Framer Motion 的 motion.button
│   │   │   └── index.module.css
│   │   ├── AgroCard/       # [卡片组件]
│   │   │   ├── index.tsx   # Props: variant='transparent'|'solid'
│   │   │   └── index.module.css
│   │   └── SectionTitle/   # [模块标题]
│   │
│   ├── business/           # 2. 业务复用组件
│   │   ├── ProductCard/    # 商品卡片 (带 Hover 悬浮动画)
│   │   ├── FileUploader/   # 文件上传 (封装 AntD Upload)
│   │   └── StatusTag/      # 状态标签 (封装 AntD Tag, 统一样式)
│   │
│   ├── feedback/           # 3. 反馈组件
│   │   ├── PageLoading.tsx # 全屏加载 (Lottie 或 Spinner)
│   │   └── ErrorBlock.tsx  # 错误缺省页
│   │
│   └── motion/             # 4. 动画容器组件 (Framer Motion 封装)
│       ├── MotionFade.tsx      # 淡入淡出容器
│       ├── MotionStagger.tsx   # 列表错峰加载容器
│       └── MotionPage.tsx      # 页面路由切换转场
│
├── hooks/                  # 自定义 Hooks
│   ├── useAuth.ts          # 用户认证逻辑
│   ├── useCart.ts          # 购物车逻辑
│   ├── useTheme.ts         # 主题切换
│   └── useScrollToTop.ts   # 路由切换滚动置顶
│
├── layouts/                # 布局组件
│   ├── PortalLayout.tsx    # 门户布局 (Header + Footer + Outlet)
│   ├── DashboardLayout.tsx # 后台布局 (Sidebar + Navbar + Outlet)
│   └── AuthLayout.tsx      # 登录注册布局
│
├── router/                 # 路由配置
│   ├── index.tsx           # 路由入口
│   ├── Guard.tsx           # 路由守卫 (权限控制)
│   └── routes/             # 路由表拆分
│       ├── portalRoutes.tsx
│       ├── farmerRoutes.tsx
│       ├── ...
│
├── store/                  # Zustand 状态管理
│   ├── useUserStore.ts     # 用户信息
│   ├── useCartStore.ts     # 购物车状态
│   └── useAppStore.ts      # 全局 UI 状态
│
├── types/                  # TS 类型定义
│   ├── entity.ts           # 实体类型 (User, Product, Order)
│   └── api.d.ts            # 接口响应类型
│
├── utils/                  # 工具库
│   ├── request.ts          # Axios 实例
│   └── format.ts           # 金额/日期格式化
│
└── pages/                  # 页面视图 (对应设计文档的 P, F, B, E, BK, A 系列)
    │
    ├── portal/             # [P系列] 门户
    │   ├── Home/           # P-01 首页
    │   │   ├── index.tsx
    │   │   ├── HeroCarousel.tsx  # 轮播图
    │   │   └── NewsSection.tsx
    │   ├── Mall/           # P-02 商城
    │   │   ├── ProductList.tsx
    │   │   └── FilterPanel.tsx
    │   └── ProductDetail/  # P-03 详情
    │
    ├── farmer/             # [F系列] 农户端
    │   ├── Dashboard/      # F-01 工作台
    │   ├── ProductPublish/ # F-02 发布货源 (React Hook Form)
    │   └── LoanApply/      # F-03 惠农贷 (Step Form)
    │
    ├── bank/               # [BK系列] 银行端
    │   ├── LoanApproval/   # BK-01 审批列表 (AntD Table)
    │   └── ApprovalDetail/ # BK-02 详情 (PDF Viewer)
    │
    └── ... (buyer, expert, admin)
四、 关键组件与动画实现 (React + Framer Motion)

这是实现设计规范中“精细动画”的核心部分。

1. AgroButton - 带微交互的按钮组件

对应规范：3.1 按钮交互 (Hover 上浮, Click 缩放)

code
Tsx
download
content_copy
expand_less
// src/components/common/AgroButton/index.tsx
import React from 'react';
import { motion, HTMLMotionProps } from 'framer-motion';
import { LoadingOutlined } from '@ant-design/icons';
import styles from './index.module.css'; // CSS Module 处理变体样式

// 定义 Props 类型
interface AgroButtonProps extends HTMLMotionProps<"button"> {
  variant?: 'solid' | 'ghost'; // 对应设计规范的两种格式
  loading?: boolean;
  children: React.ReactNode;
}

export const AgroButton: React.FC<AgroButtonProps> = ({ 
  variant = 'solid', 
  loading, 
  children, 
  className,
  ...props 
}) => {
  return (
    <motion.button
      className={`${styles.btn} ${styles[variant]} ${className || ''}`}
      disabled={loading || props.disabled}
      // --- Framer Motion 动画定义 ---
      whileHover={{ y: -1 }}        // 悬停上浮 1px
      whileTap={{ scale: 0.98 }}    // 点击缩小 98%
      transition={{ type: 'spring', stiffness: 400, damping: 17 }} // 物理弹簧效果
      {...props}
    >
      {loading && <LoadingOutlined className="mr-2 animate-spin" />}
      {children}
    </motion.button>
  );
};
2. MotionStagger - 列表错峰加载容器

对应规范：4.2 瀑布流加载 (错峰动画)

code
Tsx
download
content_copy
expand_less
// src/components/motion/MotionStagger.tsx
import React from 'react';
import { motion, Variants } from 'framer-motion';

// 父容器变体
const containerVariants: Variants = {
  hidden: { opacity: 0 },
  show: {
    opacity: 1,
    transition: {
      staggerChildren: 0.05, // 每个子元素间隔 50ms (对应规范)
    },
  },
};

// 子元素变体
const itemVariants: Variants = {
  hidden: { opacity: 0, y: 20 }, // 初始：透明且下移 20px
  show: { 
    opacity: 1, 
    y: 0,
    transition: { type: 'spring', stiffness: 300, damping: 24 } 
  },
};

interface Props {
  children: React.ReactNode;
  className?: string;
}

export const MotionStaggerContainer: React.FC<Props> = ({ children, className }) => {
  return (
    <motion.div
      className={className}
      variants={containerVariants}
      initial="hidden"
      animate="show"
    >
      {children}
    </motion.div>
  );
};

// 导出子组件包装器
export const MotionStaggerItem: React.FC<{ children: React.ReactNode; className?: string }> = ({ children, className }) => (
  <motion.div variants={itemVariants} className={className}>
    {children}
  </motion.div>
);

使用示例 (在商城列表页):

code
Tsx
download
content_copy
expand_less
// src/pages/portal/Mall/ProductList.tsx
import { MotionStaggerContainer, MotionStaggerItem } from '@/components/motion/MotionStagger';
import ProductCard from '@/components/business/ProductCard';

export const ProductList = ({ products }) => {
  return (
    <MotionStaggerContainer className="grid grid-cols-4 gap-6">
      {products.map((product) => (
        <MotionStaggerItem key={product.id}>
          <ProductCard data={product} />
        </MotionStaggerItem>
      ))}
    </MotionStaggerContainer>
  );
};
3. 惠农贷申请表单 (React Hook Form + Zod)

对应页面：F-03 惠农贷申请

code
Tsx
download
content_copy
expand_less
// src/pages/farmer/LoanApply/index.tsx
import { useForm, Controller } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { Input, Select, Steps } from 'antd';
import { AgroButton } from '@/components/common/AgroButton';

// 1. 定义 Schema (校验规则)
const loanSchema = z.object({
  amount: z.number().min(1, '最低申请 1 万元').max(50, '最高申请 50 万元'),
  term: z.enum(['6', '12', '24']),
  purpose: z.string().min(5, '请详细描述贷款用途'),
});

type LoanFormValues = z.infer<typeof loanSchema>;

export const LoanApplyPage = () => {
  const { control, handleSubmit, formState: { errors } } = useForm<LoanFormValues>({
    resolver: zodResolver(loanSchema),
    defaultValues: { amount: 10, term: '12' }
  });

  const onSubmit = (data: LoanFormValues) => {
    console.log('提交申请:', data);
    // 调用 API
  };

  return (
    <div className="w-[800px] mx-auto p-8 bg-white rounded-lg shadow-sm">
      <Steps current={1} items={[...]} className="mb-8" />
      
      <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
        {/* 金额输入 */}
        <div>
          <label className="block mb-2 font-bold text-gray-700">申请金额 (万元)</label>
          <Controller
            name="amount"
            control={control}
            render={({ field }) => (
              <Input {...field} type="number" suffix="万元" status={errors.amount ? 'error' : ''} />
            )}
          />
          {errors.amount && <p className="text-red-500 text-sm mt-1">{errors.amount.message}</p>}
        </div>

        {/* 提交按钮 */}
        <div className="pt-4 border-t">
          <AgroButton type="submit" className="w-full h-12 text-lg">
            提交审核
          </AgroButton>
        </div>
      </form>
    </div>
  );
};
4. 全局状态管理 (Zustand)
code
Tsx
download
content_copy
expand_less
// src/store/useUserStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware'; // 持久化存储

interface UserState {
  token: string | null;
  userInfo: { name: string; role: 'farmer' | 'buyer' | 'expert' | 'admin' } | null;
  login: (token: string, userInfo: any) => void;
  logout: () => void;
}

export const useUserStore = create<UserState>()(
  persist(
    (set) => ({
      token: null,
      userInfo: null,
      login: (token, userInfo) => set({ token, userInfo }),
      logout: () => set({ token: null, userInfo: null }),
    }),
    {
      name: 'agro-user-storage', // localStorage key
    }
  )
);
五、 开发规范补充

React 组件命名: 必须使用 PascalCase (大驼峰)，如 ProductCard.tsx。

Hook 命名: 必须以 use 开头，如 useCart.ts。

样式隔离: 业务组件一律使用 CSS Modules (style.module.css)，避免全局污染；布局类样式使用 Tailwind Utility Class。

数据请求: 所有 API 调用必须通过 src/api/ 下定义的函数，禁止在组件内直接使用 axios.get。

类型安全: 禁止使用 any。API 返回类型必须在 types/api.d.ts 中严格定义。

这份架构不仅能支撑起“智农链”复杂的业务逻辑，还能通过 Framer Motion 和 React 的组件化特性，完美还原您设计文档中的视觉效果和交互细节。