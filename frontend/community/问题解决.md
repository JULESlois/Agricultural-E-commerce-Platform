# 问题解决记录

## 问题 1: 后端连接失败

### 错误信息
```
[vite] http proxy error: /api/community/categories/tree
AggregateError [ECONNREFUSED]
```

### 原因
后端服务未启动，前端无法连接到 http://localhost:3003

### 解决方案
启动后端服务：

```bash
cd backend/community
npm run dev
```

或使用批处理文件：
```bash
cd backend/community
start-dev.bat
```

### 验证
后端服务启动后会显示：
```
Community service running on port 3003
```

可以通过访问 http://localhost:3003/api/community/categories/tree 验证服务是否正常。

---

## 问题 2: 顶部栏样式调整

### 需求
将顶部导航栏改为绿底白字

### 修改内容
修改 `src/components/Layout/Header.tsx` 中的样式：

**修改前：**
- 背景色：白色
- Logo 颜色：深绿
- 导航链接：深灰色

**修改后：**
- 背景色：深绿 (#5F7367)
- Logo 颜色：白色
- 导航链接：白色（带透明度）
- 登录按钮：白底绿字

### 效果
更加突出品牌色，视觉层次更清晰。

---

## 完整启动流程

### 1. 启动后端服务
```bash
# 在项目根目录
cd backend/community
npm run dev
```

等待看到：
```
Community service running on port 3003
```

### 2. 启动前端服务
```bash
# 在新的终端窗口
cd frontend/community
npm run dev
```

等待看到：
```
VITE v6.4.1  ready in 206 ms
➜  Local:   http://localhost:5174/
```

### 3. 访问应用
打开浏览器访问：http://localhost:5174

---

## 常见问题

### Q: 前端启动后页面空白？
A: 检查浏览器控制台，确认后端服务是否正常运行。

### Q: 后端启动失败？
A: 
1. 检查端口 3003 是否被占用
2. 确认数据库连接配置正确
3. 查看 backend/community/.env 文件

### Q: 数据库连接失败？
A: 
1. 确认 PostgreSQL 服务已启动
2. 检查 .env 中的数据库配置
3. 运行 `node test-connection.js` 测试连接

### Q: API 请求 404？
A: 
1. 确认后端路由配置正确
2. 检查 vite.config.ts 中的代理配置
3. 查看后端控制台日志

---

## 端口占用

| 服务 | 端口 | 说明 |
|------|------|------|
| 社区前端 | 5174 | Vite 开发服务器 |
| 社区后端 | 3003 | Express API 服务 |
| PostgreSQL | 5432 | 数据库服务 |

---

## 开发建议

1. **同时启动两个终端**
   - 终端 1: 运行后端服务
   - 终端 2: 运行前端服务

2. **使用批处理文件**
   - backend/community/start-dev.bat
   - frontend/community/start-dev.bat

3. **查看日志**
   - 后端日志：终端 1
   - 前端日志：终端 2 + 浏览器控制台

4. **热更新**
   - 后端：nodemon 自动重启
   - 前端：Vite HMR 自动刷新

---

**更新时间**: 2025-11-07  
**状态**: ✅ 已解决
